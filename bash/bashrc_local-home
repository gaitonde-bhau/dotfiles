# bashrc file for home

has() {
  command -v "$1" > /dev/null 2>&1
}

# thefuck : https://github.com/nvbn/thefuck
has thefuck && eval "$(thefuck --alias pls)"


##
# Aliases
alias amd_vpn='sudo openconnect -u kshenoy --no-cert-check --token-mode=rsa atl-vpn.amd.com'


## Specific to root
__histfile_perm_update() {
  echo "Changing permissions of HISTFILE..."
  find $(dirname $HISTFILE) \( -user root -o -group root \) \
    -exec chmod 640 {} \; -exec chown ks {} \; -exec chgrp ks {} \;
}
if (( $EUID ==  0 )); then
  trap __histfile_perm_update EXIT
fi

# When leaving the console, clear the screen to increase privacy
if [[ "$SHLVL" = 1 ]]; then
  [[ -x /usr/bin/clear_console ]] && /usr/bin/clear_console -q
fi

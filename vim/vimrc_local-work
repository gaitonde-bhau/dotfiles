"
" LOCAL SETTINGS
"
function! s:SetLocalSettings(filename)
  if (a:filename =~ '/ch/rtl') && (a:filename !~ 'txl$')
    setlocal textwidth=80
    setlocal softtabstop=3
    setlocal shiftwidth=3
  elseif (a:filename =~ '\v/ch/verif/(chk_)?l3/|\v/ch/tc/tb_l3')
    setlocal colorcolumn+=101
    let b:OrigamiFoldAtCol=96
  elseif (a:filename =~ '\v/ch/verif/txn/\w*l3\w*\.txl') && (a:filename !~ 'txn_l2l3.txl')
    setlocal colorcolumn+=101
    let b:OrigamiFoldAtCol=96
  endif
endfunction


set isfname+={,}                                          " This will allow vim to understand env vars with curly braces
set isfname-==


if ($STEM != "")
  set path=.,$STEM/build/latest/generated/ch,$STEM/build/latest/fake_c_incl/**,$STEM/ch/**,$STEM/import/avf/**,/usr/local/include,/usr/include,**;
  let g:ale_cpp_clang_options  = get(g:, 'ale_cpp_clang_options', "")
  let g:ale_cpp_clang_options .= " -I $STEM/build/latest/generated/ch -I $STEM/build/latest/fake_c_incl"
endif


augroup AMD
  autocmd!
  autocmd BufNewFile,BufRead *.txl,*.rdl   execute "set filetype=ruby.".expand('<afile>:e')
  autocmd BufNewFile,BufRead *             call s:SetLocalSettings(expand('<afile>:p'))
  autocmd BufNewFile,BufRead *_if.h        let b:fswitchfnames='/_if$//'
  autocmd BufNewFile,BufRead *_provider.cc let b:fswitchfnames='/_provider$//'
augroup END


"" Fat finger forgiveness
abbrev resposne response
abbrev Resposne Response
